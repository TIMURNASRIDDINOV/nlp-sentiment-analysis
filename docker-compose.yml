version: "3.9"

services:
  sentiment:
    build: .
    ports:
      - "${NLP_PORT:-5000}:5000"
    environment:
      - NLP_MODEL=${NLP_MODEL:-distilbert-base-uncased-finetuned-sst-2-english}
      - NLP_DEVICE=${NLP_DEVICE:--1}
      - NLP_HOST=0.0.0.0
      - NLP_PORT=5000
      - NLP_LOG_LEVEL=${NLP_LOG_LEVEL:-INFO}
    restart: unless-stopped
    # Uncomment below for GPU support (requires nvidia-docker):
    # deploy:
    #   resources:
    #     reservations:
    #       devices:
    #         - driver: nvidia
    #           count: 1
    #           capabilities: [gpu]
